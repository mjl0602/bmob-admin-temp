(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e4f1"],{"RU/L":function(e,t,r){r("Rqdy");var n=r("WEpk").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},Rqdy:function(e,t,r){var n=r("Y7ZC");n(n.S+n.F*!r("jmDH"),"Object",{defineProperty:r("2faE").f})},SEkw:function(e,t,r){e.exports={default:r("RU/L"),__esModule:!0}},V7oC:function(e,t,r){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r("SEkw"));t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(e,a.key,a)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},Znzd:function(e,t,r){"use strict";r.r(t);var n=r("14Xm"),a=r.n(n),o=r("D3Ub"),i=r.n(o),s=r("iCc5"),l=r.n(s),u=r("V7oC"),c=r.n(u),d=r("t6Sf"),f=(r("mRI9"),{filters:{},mixins:[d.a],data:function(){return{objStr:"admin",source:new p}},methods:{}}),p=function(){function e(){l()(this,e),this.defaultObject={account:"",name:"",password:"",introduction:"",roles:"",disable:!1},this.rules={objectId:[{required:!0,message:"必填",trigger:"blur"}],account:[{required:!0,message:"必填",trigger:"blur"}],name:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"}],introduction:[{required:!0,message:"必填",trigger:"blur"}],roles:[{required:!0,message:"必填",trigger:"blur"}],disable:[{required:!0,message:"必填",trigger:"blur"}],createdAt:[{required:!0,message:"必填",trigger:"blur"}],updatedAt:[{required:!0,message:"必填",trigger:"blur"}]}}return c()(e,[{key:"all",value:function(){var e=i()(a.a.mark(function e(t){var r,n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bmob.Query("admin"),e.next=3,r.count();case 3:return n=e.sent,t.page&&t.pageSize&&(r.skip(t.pageSize*(t.page-1)),r.limit(t.pageSize)),r.order("-createdAt"),e.next=8,r.find();case 8:return o=e.sent,e.abrupt("return",{total:n,data:o});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=i()(a.a.mark(function e(t){var r,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bmob.Query("admin"),e.next=3,r.get(t.objectId);case 3:return(n=e.sent).set("account",t.account),n.set("name",t.name),n.set("password",t.password),n.set("introduction",t.introduction),n.set("disable",t.disable),e.abrupt("return",n.save());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=i()(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Bmob.Query("admin")).set("account",t.account),r.set("name",t.name),r.set("password",t.password),r.set("introduction",t.introduction),r.set("roles",["superadmin"]),r.set("disable",t.disable),e.abrupt("return",r.save());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteObj",value:function(){var e=i()(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bmob.Query("admin"),e.abrupt("return",r.destroy(t.objectId));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=f,m=(r("bbZG"),r("KHd+")),g=Object(m.a)(b,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"对象ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.objectId))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.account))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"密码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.password))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"介绍",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.introduction))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"权限",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.roles))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"封禁",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.disable))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"创建日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createdAt))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"更新日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.updatedAt))]}}])}),e._v(" "),r("el-table-column",{attrs:{"class-name":"status-col",label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){e.deleteRow(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),e.query.total?r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-sizes":[5,10,20,30,50],"page-size":e.query.pageSize,total:e.query.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),r("el-dialog",{attrs:{visible:e.addDialogVisible,title:e.dialogTitle},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:e.row,rules:e.rules,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"对象ID",prop:"objectId"}},[r("el-input",{attrs:{placeholder:"请输入对象ID"},model:{value:e.row.objectId,callback:function(t){e.$set(e.row,"objectId",t)},expression:"row.objectId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.row.name,callback:function(t){e.$set(e.row,"name",t)},expression:"row.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"账号",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.row.account,callback:function(t){e.$set(e.row,"account",t)},expression:"row.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.row.password,callback:function(t){e.$set(e.row,"password",t)},expression:"row.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"介绍",prop:"introduction"}},[r("el-input",{attrs:{placeholder:"请输入介绍"},model:{value:e.row.introduction,callback:function(t){e.$set(e.row,"introduction",t)},expression:"row.introduction"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"封禁",prop:"disable"}},[r("el-input",{attrs:{placeholder:"请输入封禁"},model:{value:e.row.disable,callback:function(t){e.$set(e.row,"disable",t)},expression:"row.disable"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"创建日期",prop:"createdAt"}},[r("el-input",{attrs:{placeholder:"请输入创建日期"},model:{value:e.row.createdAt,callback:function(t){e.$set(e.row,"createdAt",t)},expression:"row.createdAt"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"更新日期",prop:"updatedAt"}},[r("el-input",{attrs:{placeholder:"请输入更新日期"},model:{value:e.row.updatedAt,callback:function(t){e.$set(e.row,"updatedAt",t)},expression:"row.updatedAt"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="adminManage.vue";t.default=g.exports},bbZG:function(e,t,r){"use strict";var n=r("nqhk");r.n(n).a},iCc5:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},mRI9:function(e,t,r){"use strict";var n=r("4d7F"),a=r.n(n),o=r("iCc5"),i=r.n(o),s=r("V7oC"),l=r.n(s);function u(){return{id:parseInt(10*Math.random()),title:"Title#"+parseInt(1e5*Math.random())}}var c=function(){function e(){i()(this,e)}return l()(e,null,[{key:"all",value:function(){return d([u(),u(),u()])}},{key:"edit",value:function(e){return d("修改结果")}},{key:"add",value:function(e){return d("添加结果")}},{key:"deleteObj",value:function(e){return d("删除结果")}}]),e}();function d(e){return console.log("模拟返回"),new a.a(function(t,r){t(e)})}c.defaultObject={},c.rules={},t.a=c},nqhk:function(e,t,r){},t6Sf:function(e,t,r){"use strict";var n=r("4d7F"),a=r.n(n),o=r("P2sY"),i=r.n(o),s=r("14Xm"),l=r.n(s),u=r("D3Ub"),c=r.n(u),d=r("mRI9");t.a={computed:{dialogTitle:function(){return(this.isNew?"新增":"修改")+this.objStr}},filters:{},data:function(){return{objStr:"#对象#",list:[],listLoading:!0,query:{total:0,pageSize:5,page:1},addDialogVisible:!1,isNew:!1,row:{},rules:{},source:d.a,datePickOption:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created:function(){this.queryAll()},methods:{queryAll:function(){var e=this;return c()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,e.source.all(e.query);case 4:(r=t.sent).total?(e.list=r.data,e.query.total=r.total):e.list=r,console.log("查询数据:",e.list),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.notifyError("查询失败","查询数据时发生错误"),e.listLoading=!1;case 14:e.listLoading=!1;case 15:case"end":return t.stop()}},t,e,[[1,9]])}))()},add:function(){var e=this;return c()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.isNew=!0,e.row=i()({},e.source.defaultObject),e.rules=d.a.rules,e.addDialogVisible=!0;case 4:case"end":return t.stop()}},t,e)}))()},edit:function(e){console.log("edit",e),this.isNew=!1,this.row=i()({},e),this.rules=d.a.rules,this.addDialogVisible=!0},submit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.row;return c()(l.a.mark(function r(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("###submit",t,e.isNew),r.prev=1,!e.isNew){r.next=9;break}return console.log("add"),r.next=6,e.source.add(e.row);case 6:e.notifySuccess("新增成功","成功新增"+e.objStr),r.next=13;break;case 9:return console.log("edit"),r.next=12,e.source.edit(e.row);case 12:e.notifySuccess("修改成功",e.objStr+"修改成功");case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(1),console.error(r.t0),e.notifyError("失败","操作发生错误，数据提交失败.");case 19:return e.addDialogVisible=!1,r.next=22,e.queryAll();case 22:case"end":return r.stop()}},r,e,[[1,15]])}))()},deleteRow:function(e){var t=this;return c()(l.a.mark(function r(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("删除操作将不能撤销, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"});case 2:return r.next=4,t.source.deleteObj(e);case 4:return t.notifySuccess("删除成功",t.objStr+"已被删除"),r.next=7,t.queryAll();case 7:case"end":return r.stop()}},r,t)}))()},handleSizeChange:function(e){this.query.page=1,this.query.pageSize=e,console.log("handleSizeChange",e),this.queryAll()},handleCurrentChange:function(e){this.query.page=e,console.log("handleCurrentChange",e),this.queryAll()},goback:function(){this.$router.go(-1)},notifyError:function(e,t){this.$notify({title:e,message:t,type:"error",duration:2e3})},notifyWarning:function(e,t){this.$notify({title:e,message:t,type:"warning",duration:2e3})},notifySuccess:function(e,t){this.$notify({title:e,message:t,type:"success",duration:2e3})},needInterface:function(){this.$notify({title:"等待开发",message:"需要后台接口",type:"warning",duration:2e3})},fakePromise:function(){return new a.a(function(e,t){e()})}}}}}]);